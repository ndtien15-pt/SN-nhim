<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>G·ª≠i Nh√≠m ‚ù§Ô∏è</title>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@600&family=Quicksand:wght@400;600&display=swap" rel="stylesheet">
    <style>
        :root { 
            --pink: #ff4d6d; 
            --dark-pink: #c9184a;
            --bg: #fff0f3; 
            --glass: rgba(255, 255, 255, 0.8);
        }
        
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        
        body, html { 
            margin: 0; padding: 0; width: 100%; height: 100%; 
            background: var(--bg); font-family: 'Quicksand', sans-serif;
            overflow: hidden; 
        }

        /* N·ªÅn Gradient ƒë·ªông */
        body {
            background: linear-gradient(-45deg, #fff0f3, #ffccd5, #fff0f3, #ffb3c1);
            background-size: 400% 400%;
            animation: gradientBG 15s ease infinite;
        }

        @keyframes gradientBG {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .wrapper {
            display: flex; justify-content: center; align-items: center;
            width: 100%; height: 100%; position: relative;
        }

        /* Intro Section */
        #intro {
            position: fixed; inset: 0; background: rgba(255, 194, 209, 0.95);
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            z-index: 1000; transition: all 1s cubic-bezier(0.4, 0, 0.2, 1); color: white; text-align: center;
            padding: 20px; backdrop-filter: blur(10px);
        }

        .intro-text {
            max-width: 320px; line-height: 1.6; margin-bottom: 30px;
        }

        .intro-text p {
            margin: 12px 0; font-size: 1.1rem; opacity: 0;
            transform: translateY(20px);
            animation: fadeInUp 0.8s ease forwards;
        }

        @keyframes fadeInUp {
            to { opacity: 1; transform: translateY(0); }
        }

        #start-btn {
            padding: 18px 45px; border-radius: 50px; border: none;
            background: white; color: var(--pink); font-weight: bold; cursor: pointer;
            box-shadow: 0 10px 25px rgba(255, 77, 109, 0.3); font-size: 1.2rem;
            transition: 0.3s;
        }

        #start-btn:active { transform: scale(0.95); }

        /* Gallery Section */
        #main-app { display: none; width: 100%; height: 100%; }
        
        .gallery-content {
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            width: 100%; height: 100%; position: relative;
        }

        /* Hi·ªáu ·ª©ng Photo Stack */
        .photo-stack {
            position: relative; width: 85%; max-width: 320px; height: 450px;
        }

        .polaroid {
            position: absolute; inset: 0;
            background: white; padding: 12px 12px 60px 12px; border-radius: 4px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            transition: all 0.6s cubic-bezier(0.23, 1, 0.32, 1);
            cursor: pointer;
            transform-origin: center center;
        }

        .polaroid img { 
            width: 100%; height: 100%; object-fit: cover; 
            border: 1px solid #eee; 
        }

        .caption { 
            position: absolute; bottom: 15px; left: 0; right: 0;
            font-family: 'Dancing Script', cursive; font-size: 1.8rem; 
            text-align: center; color: #444; 
        }

        .counter { 
            margin-top: 40px; color: var(--pink); font-weight: 600; 
            background: var(--glass); padding: 8px 25px; border-radius: 25px; 
            backdrop-filter: blur(5px); z-index: 10;
        }

        /* B·ª©c th∆∞ cu·ªëi - Glassmorphism */
        #letter {
            display: none; position: fixed; inset: 0; background: rgba(255, 240, 243, 0.8);
            z-index: 2000; justify-content: center; align-items: center;
            backdrop-filter: blur(15px);
        }

        .letter-content {
            background: white; padding: 40px 30px; border-radius: 20px; width: 90%; max-width: 400px;
            box-shadow: 0 20px 50px rgba(255, 77, 109, 0.2); line-height: 1.8;
            transform: scale(0.8); opacity: 0; transition: 0.8s all;
        }

        #letter.show .letter-content { transform: scale(1); opacity: 1; }

        /* CSS PH√ÅO HOA */
        .particle {
            position: fixed;
            pointer-events: none;
            width: 8px;
            height: 8px;
            border-radius: 50%;
            z-index: 9999;
            animation: burst 0.8s ease-out forwards;
        }

        @keyframes burst {
            0% { transform: translate(0, 0) scale(1); opacity: 1; }
            100% { transform: translate(var(--tx), var(--ty)) scale(0); opacity: 0; }
        }

        /* Hi·ªáu ·ª©ng Tim bay n·ªÅn */
        .heart { 
            position: fixed; top: -10%; z-index: 1; 
            animation: fall linear forwards; pointer-events: none; 
        }

        @keyframes fall {
            0% { transform: translateY(0) rotate(0deg) translateX(0); }
            100% { transform: translateY(105vh) rotate(360deg) translateX(15px); }
        }
    </style>
</head>
<body>

    <div id="intro">
        <h2 style="font-family: 'Dancing Script'; font-size: 3.2rem; margin-bottom: 10px;">G·ª≠i Nh√≠m... ‚ù§Ô∏è</h2>
        <div class="intro-text">
            <p style="animation-delay: 0.5s">Ch√†o c√¥ b√© c·ªßa anh,</p>
            <p style="animation-delay: 1.5s">H√¥m nay l√† m·ªôt ng√†y th·∫≠t s·ª± √Ω nghƒ©a..</p>
            <p style="animation-delay: 2.5s">Anh c√≥ m·ªôt b·∫•t ng·ªù nh·ªè d√†nh cho em ƒë√¢y</p>
            <p style="animation-delay: 3.5s">Anh ƒë√£ t·ª± tay chu·∫©n b·ªã m√≥n qu√† nh·ªè n√†y ƒë·ªÉ l∆∞u gi·ªØ nh·ªØng k·ª∑ ni·ªám c·ªßa em trong su·ªët th·ªùi gian qua.</p>
            <p style="animation-delay: 4.5s">√Ä v·∫´n r·∫•c cinloi v√¨ ƒë√£ cap ·∫£nh tr√™n ig c·ªßa em nha hhh.</p>
            <p style="animation-delay: 5.5s">N√†o b√¢y gi·ªù th√¨ c√πng anh nh√¨n l·∫°i nh√©? ‚ú®</p>
        </div>
        <button id="start-btn">B·∫Øt ƒë·∫ßu h√†nh tr√¨nh</button>
    </div>

    <audio id="bg-music" loop>
        <source src="nhac.mp3" type="audio/mpeg">
    </audio>

    <div class="wrapper">
        <div id="main-app">
            <div class="gallery-content">
                <div class="photo-stack" id="stack"></div>
                <div class="counter"><span id="cur">1</span> / 23</div>
            </div>
        </div>

        <div id="letter">
            <div class="letter-content">
                <h2 style="font-family: 'Dancing Script'; color: var(--pink); font-size: 2.5rem;">G·ª≠i Nh√≠m dyeu nh·∫•t tgioi,</h2>
                <p>Ch√∫c m·ª´ng sinh nh·∫≠t c√¥ g√°i tuy·ªát v·ªùi c·ªßa anh! Hy v·ªçng m√≥n qu√† nh·ªè n√†y s·∫Ω l√†m em c∆∞·ªùi th·∫≠t t∆∞∆°i.</p>
                <p>C·∫£m ∆°n em ƒë√£ ƒë√£ ƒë·ªìng h√†nh c√πng anh. Anh y√™u em r·∫•t nhi·ªÅu! ‚ù§Ô∏è</p>
                <p style="text-align: right; font-family: 'Dancing Script'; font-size: 2.2rem; color: var(--pink); margin-top: 20px;">Ti·∫øn</p>
                <button onclick="location.reload()" style="width:100%; border:none; background:#eee; padding:10px; border-radius:10px; margin-top:20px; color:#666">Xem l·∫°i t·ª´ ƒë·∫ßu</button>
            </div>
        </div>
    </div>

    <script>
        const photosCount = 23; // ƒê√£ ƒë·ªïi th√†nh 23
        let current = 1;
        const stack = document.getElementById('stack');
        const music = document.getElementById('bg-music');

        document.getElementById('start-btn').onclick = () => {
            document.getElementById('intro').style.opacity = '0';
            music.play().catch(e => console.log("Music error:", e));
            setTimeout(() => {
                document.getElementById('intro').style.display = 'none';
                document.getElementById('main-app').style.display = 'block';
                renderPhoto();
            }, 1000);
        };

        function createFirework(x, y) {
            const colors = ['#ff4d6d', '#ffccd5', '#c9184a', '#ffbd00', '#ffffff'];
            const particleCount = 20;
            for (let i = 0; i < particleCount; i++) {
                const p = document.createElement('div');
                p.className = 'particle';
                p.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                p.style.left = x + 'px';
                p.style.top = y + 'px';
                const angle = Math.random() * Math.PI * 2;
                const dist = Math.random() * 100 + 20;
                p.style.setProperty('--tx', `${Math.cos(angle) * dist}px`);
                p.style.setProperty('--ty', `${Math.sin(angle) * dist}px`);
                document.body.appendChild(p);
                setTimeout(() => p.remove(), 800);
            }
        }

        function renderPhoto() {
            stack.innerHTML = '';
            for(let i=0; i<3; i++) {
                const layer = document.createElement('div');
                layer.className = 'polaroid';
                layer.style.transform = `rotate(${(Math.random() * 8 - 4)}deg) translate(${(Math.random() * 6 - 3)}px, ${(Math.random() * 6 - 3)}px)`;
                layer.style.zIndex = 1;
                stack.appendChild(layer);
            }

            const activePhoto = document.createElement('div');
            activePhoto.className = 'polaroid';
            activePhoto.style.zIndex = 10;
            activePhoto.innerHTML = `
                <img src="img/${current}.jpg" onerror="this.src='https://via.placeholder.com/300x400?text=K·ª∑+ni·ªám+${current}'">
                <div class="caption">Memory #${current}</div>
            `;
            
            activePhoto.style.transform = 'scale(0.5) translateY(50px)';
            activePhoto.style.opacity = '0';
            stack.appendChild(activePhoto);

            setTimeout(() => {
                activePhoto.style.transform = 'scale(1) rotate(' + (Math.random() * 4 - 2) + 'deg)';
                activePhoto.style.opacity = '1';
            }, 50);

            document.getElementById('cur').innerText = current;
        }

        stack.onclick = () => {
            const active = stack.querySelector('.polaroid:last-child');
            if (!active) return;

            const rect = active.getBoundingClientRect();
            const corners = [
                {x: rect.left, y: rect.top},      
                {x: rect.right, y: rect.top},     
                {x: rect.left, y: rect.bottom},   
                {x: rect.right, y: rect.bottom}   
            ];

            corners.forEach((corner, index) => {
                setTimeout(() => {
                    createFirework(corner.x, corner.y);
                }, index * 30);
            });

            if (current < photosCount) {
                active.style.transform = 'translateX(150%) rotate(30deg) scale(0.8)';
                active.style.opacity = '0';
                current++;
                setTimeout(renderPhoto, 300);
            } else {
                showLetter();
            }
        };

        function showLetter() {
            document.getElementById('main-app').style.opacity = '0';
            setTimeout(() => {
                document.getElementById('main-app').style.display = 'none';
                const l = document.getElementById('letter');
                l.style.display = 'flex';
                setTimeout(() => {
                    l.classList.add('show');
                    createFirework(window.innerWidth/2, window.innerHeight/2);
                    setTimeout(() => createFirework(window.innerWidth/2, window.innerHeight/3), 300);
                }, 100);
            }, 500);
        }

        setInterval(() => {
            const h = document.createElement('div');
            h.className = 'heart';
            h.innerHTML = ['‚ù§Ô∏è','üíñ','üíó','üå∏'][Math.floor(Math.random()*4)];
            h.style.left = Math.random() * 100 + 'vw';
            h.style.fontSize = (Math.random() * 15 + 15) + 'px';
            h.style.animationDuration = (Math.random() * 3 + 3) + 's';
            h.style.opacity = Math.random();
            document.body.appendChild(h);
            setTimeout(() => h.remove(), 6000);
        }, 450);
    </script>
</body>
</html>